You can create a callback function in your BT_new.dart file that updates the state in your unlock_notification.dart file. Here's an example:

In BT_new.dart:

scss
Copy code
typedef AccessCallback = void Function(String access);

class BluetoothService {
  AccessCallback onAccessCallback;

  // ...

  void processArduinoMessage(String message) {
    var arduinoMessage = extractArduinoMessage(message);
    if (arduinoMessage != null) {
      //api call
      sendArduinoMessageToApi(arduinoMessage);
      print("Access: ${arduinoMessage.access}");
      print("UID: ${arduinoMessage.uid}");
      print("Status: ${arduinoMessage.status}");
      
      // Call the callback function with the access value
      if (onAccessCallback != null) {
        onAccessCallback(arduinoMessage.access);
      }
    } else {
      print("Invalid access message!");
    }
  }

  // ...
}
In unlock_notification.dart:

java
Copy code
class UnlockNotification extends StatefulWidget {
  @override
  _UnlockNotificationState createState() => _UnlockNotificationState();
}

class _UnlockNotificationState extends State<UnlockNotification> {
  bool _blackscreen = false;
  bool _unlockSteps = false;

  final BluetoothService bluetoothService = BluetoothService();

  @override
  void initState() {
    super.initState();

    // Set the onAccessCallback to update the state when an access message is received
    bluetoothService.onAccessCallback = (String access) {
      if (access == 'Access granted') {
        setState(() {
          _blackscreen = false;
          _unlockSteps = false;
        });
      }
    };

    // Start listening for Bluetooth messages
    bluetoothService.listen();
  }

  @override
  void dispose() {
    // Stop listening for Bluetooth messages
    bluetoothService.cancel();

    super.dispose();
  }

  // ...
}
This way, when an access message is received with the value "Access granted", the onAccessCallback function in BT_new.dart will be called with the access value, which will then update the state in unlock_notification.dart.